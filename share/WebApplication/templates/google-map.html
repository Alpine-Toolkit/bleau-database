<!-- http://www.gumsparis.asso.fr/maps.php?lat=48.445788&lng=2.637384&lieu=Bas+Cuvier -->
<!DOCTYPE html>
<!-- Google Maps JavaScript API V3  by Yves 18/12/2010 -->
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
  var directionsService = new google.maps.DirectionsService();
  var directionsDisplay = new google.maps.DirectionsRenderer();
  var map;
  
  function initialize() {
    var myOptions = {
      zoom: 15,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    directionsDisplay.setMap(map);
    directionsDisplay.setPanel(document.getElementById("directionsPanel"));
    calcRoute();
  }
  
  function calcRoute() {
    var end = "48.445788, 2.637384";
    var way_points = [];
    switch("Bas Cuvier") {
      case "Carrefour du Bas Bréau" :
        way_points[0] = {location:"48.4548797, 2.6047897", stopover:true};
        way_points[1] = {location:"48.4458280, 2.6122141", stopover:true};
        way_points[2] = {location:"48.4453013, 2.6117635", stopover:true};
        break;
      case "Parking de la Croix Saint Jérome" :
        way_points[0] = {location:"48.39226, 2.50647", stopover:true};
        break;
      case "Eléphant" :
        way_points[0] = {location:"48.317285, 2.570815", stopover:true};
        break;
      case "Rocher de Milly":
      case "Bois Rond" :
      case "Parking de la Canche aux Merciers" :
         way_points[0] = {location:"Macherin", stopover:true};
         break;
      case "J.A. Martin" :
         way_points[0] = {location:"48.456232, 2.518678", stopover:true};
    }
    var request = {
      // entrée A6A porte d'Orléans
      origin: "48.8196301, 2.3268270",
      destination:end,
      waypoints: way_points,
      optimizeWaypoints: true,
      travelMode: google.maps.DirectionsTravelMode.DRIVING
    }
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
        computeTotalDistance(directionsDisplay.directions);
      }
    });
  }
  
  function computeTotalDistance(result) {
    var sum = 0;
    var myroute = result.routes[0];
    for (i = 0; i < myroute.legs.length; i++) {
      sum += myroute.legs[i].distance.value;
    }
    var total = Math.round(sum / 1000.);
    document.getElementById("total").innerHTML = total + " km";
  }
</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="float:left;width:70%; height:100%"></div>
  <div id="directionsPanel" style="float:right;width:30%;height 100%">
  <h4>Bas Cuvier</h4><p>Distance: <span id="total"></span></p>
  </div>
</body>
</html>
